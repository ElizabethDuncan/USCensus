<!DOCTYPE html>
<html>
  <head>
    <link href="static/css/map.css" rel="stylesheet" media="screen">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      function initialize() {
        var map_canvas = document.getElementById('map_canvas');
        var map_options = {
          center: new google.maps.LatLng({{ lat }}, {{ lng }}),
          zoom: {{ z }},
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var flightpath;

        var map = new google.maps.Map(map_canvas, map_options);

        var coordinates = {{ coor }}
        var flightPlanCoordinates = [];
        console.log({{lat}}, {{lng}});
        console.log(coordinates);
        for ( var i = 0, l = coordinates.length; i < l; i++) {
          flightPlanCoordinates.push( new google.maps.LatLng(coordinates[i][1], coordinates[i][0]))
      } 

        flightPath = new google.maps.Polygon({
          paths: flightPlanCoordinates,
          strokeColor: '#FF0000',
          strokeOpacity: 1.0,
          strokeWeight: 2,
          fillColor: '#FF0000',
          fillOpacity: 0.35
        });

      flightPath.setMap(map);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
  	
    <div id="map_canvas"></div>
    <div>
      <h1>Data processed!</h1>
    <p>The data is: {{ data }}</p>
    <p> The keys are: {{keys}}</p>
  </div>

  </body>
</html>